library(XML)
speechtext <- function(ymd){
sotu <- data.frame(matrix(nrow=1,ncol=3))
colnames(sotu) = c("speechtext","year","date")
for(i in 1:length(ymd)){
year <- substr(ymd[i],1,4)
url <- paste0('http://stateoftheunion.onetwothree.net/texts/',ymd[i],'.html')
doc.html = htmlTreeParse(url, useInternal = TRUE)
doc.text = unlist(xpathApply(doc.html, '//p', xmlValue))
# Replace all newline notation with spaces and all quotes with nothing
doc.text = gsub('\\n', ' ', doc.text)
doc.text = gsub('\\"', '', doc.text)
doc.text = paste(doc.text, collapse = ' ')
x <- data.frame(doc.text, year, ymd[i], stringsAsFactors = FALSE)
names(x) <- c("speechtext","year","date")
sotu <- rbind(sotu, x)
sotu <- sotu[!is.na(sotu$speechtext), ]
}
return(sotu)
}
sotu <- speechtext(c("20080128","20160112"))
sotu
View(sotu)
sotu$speechtext
a <- sotu$speechtext
a <- sotu$speechtext[1]
library(readr)
library(tm)
library(dplyr)
library(xtable)
ssc <- read_file("../../data/ssc/testb.txt")
eaf <- read_file("../../data/ea_forum/testa.txt")
texts = c(ssc, eaf)
docs <- Corpus(VectorSource(texts)) %>%
tm_map(removePunctuation) %>%
tm_map(removeNumbers) %>%
tm_map(tolower)  %>%
tm_map(removeWords, stopwords("english")) %>%
tm_map(stripWhitespace) %>%
tm_map(PlainTextDocument)
tdm <- TermDocumentMatrix(docs) %>%
as.matrix()
colnames(tdm) <- c("SSC", "EAF")
View(tdm)
library(readr)
library(tm)
library(dplyr)
library(xtable)
ssc <- read_file("../../data/ssc/testb.txt")
eaf <- read_file("../../data/ea_forum/testa.txt")
texts = c(ssc, eaf)
docs <- Corpus(VectorSource(texts)) %>%
tm_map(removePunctuation) %>%
tm_map(removeNumbers) %>%
tm_map(tolower)  %>%
tm_map(removeWords, stopwords("english")) %>%
tm_map(stripWhitespace) %>%
tm_map(PlainTextDocument)
tdm <- TermDocumentMatrix(docs) %>%
as.matrix()
colnames(tdm) <- c("SSC", "EAF")
par(mfrow=c(1,1))
comparison.cloud(tdm, random.order=FALSE, colors = c("indianred3","lightsteelblue3"),
title.size=2.5, max.words=400)
library(wordcloud)
library(readr)
library(tm)
library(dplyr)
library(xtable)
library(wordcloud)
ssc <- read_file("../../data/ssc/testb.txt")
eaf <- read_file("../../data/ea_forum/testa.txt")
texts = c(ssc, eaf)
docs <- Corpus(VectorSource(texts)) %>%
tm_map(removePunctuation) %>%
tm_map(removeNumbers) %>%
tm_map(tolower)  %>%
tm_map(removeWords, stopwords("english")) %>%
tm_map(stripWhitespace) %>%
tm_map(PlainTextDocument)
tdm <- TermDocumentMatrix(docs) %>%
as.matrix()
colnames(tdm) <- c("SSC", "EAF")
par(mfrow=c(1,1))
comparison.cloud(tdm, random.order=FALSE, colors = c("indianred3","lightsteelblue3"),
title.size=2.5, max.words=400)
library(readr)
library(tm)
library(dplyr)
library(xtable)
library(wordcloud)
ssc <- read_file("../../data/ssc/testb.txt")
eaf <- read_file("../../data/ea_forum/testa.txt")
texts = c(ssc, eaf)
docs <- Corpus(VectorSource(texts)) %>%
tm_map(removePunctuation) %>%
tm_map(removeNumbers) %>%
tm_map(tolower)  %>%
tm_map(removeWords, stopwords("english")) %>%
tm_map(stripWhitespace) %>%
tm_map(PlainTextDocument)
tdm <- TermDocumentMatrix(docs) %>%
as.matrix()
colnames(tdm) <- c("SSC", "EAF")
par(mfrow=c(1,1))
comparison.cloud(tdm, random.order=FALSE, colors = c("indianred3","lightsteelblue3"),
title.size=2.5, max.words=400)
tdm <- read.csv('../../data/eaforum_scc_BOW.csv')
library(wordcloud)
tdm <- read.csv('../../data/eaforum_scc_BOW.csv')
View(tdm)
library(wordcloud)
tdm <- read.csv('../../data/eaforum_scc_BOW.csv')
library(wordcloud)
tdm <- read.csv('../../data/eaforum_scc_BOW.csv')
library(wordcloud)
tdm <- read.csv('../../data/eaforum_scc_BOW.csv', row.names=1)
par(mfrow=c(1,1))
comparison.cloud(tdm, random.order=FALSE, colors = c("indianred3","lightsteelblue3"),
title.size=2.5, max.words=400)
library(wordcloud)
tdm <- read.csv('../../data/eaforum_scc_BOW.csv', row.names=1)
par(mfrow=c(1,1))
comparison.cloud(tdm, random.order=FALSE, colors = c("indianred3","lightsteelblue3"),
title.size=2.5, max.words=500)
commanality.cloud(tdm, colors = c("indianred3","lightsteelblue3"),
title.size=2.5, max.words=500)
tdm <- read.csv('../../data/eaforum_scc_BOW.csv', row.names=1)
par(mfrow=c(1,1))
comparison.cloud(tdm, colors = c("indianred3","lightsteelblue3"),
title.size=2.5, max.words=500)
commonality.cloud(tdm, colors = c("indianred3","lightsteelblue3"),
title.size=2.5, max.words=500)
commonality.cloud(tdm, random.order=FALSE,colors = brewer.pal(4, "Dark2"), colors = c("indianred3","lightsteelblue3"),
title.size=2.5, max.words=500)
commonality.cloud(tdm, random.order=FALSE,colors = brewer.pal(4, "Dark2"), colors = c("indianred3","lightsteelblue3"),
title.size=2.5, max.words=500)
commonality.cloud(tdm, random.order=FALSE,colors = brewer.pal(4, "Dark2"), title.size=2.5, max.words=500)
library(wordcloud)
tdm <- read.csv('../../data/eaforum_scc_BOW.csv', row.names=1)
par(mfrow=c(1,1))
comparison.cloud(tdm, colors = c("indianred3","lightsteelblue3"),
title.size=3, max.words=400)
png(filename="../../wordclouds/eaforum_ssc_comparative.png")
commonality.cloud(tdm, random.order=FALSE,colors = brewer.pal(4, "Dark2"), title.size=3, max.words=400)
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
library(wordcloud)
tdm <- read.csv('../../data/eaforum_scc_BOW.csv', row.names=1)
par(mfrow=c(1,1))
png(filename="../../wordclouds/eaforum_ssc_comparative.png")
comparison.cloud(tdm, colors = c("indianred3","lightsteelblue3"),
title.size=3, max.words=400)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE,colors = brewer.pal(4, "Dark2"), title.size=3, max.words=400)
dev.off()
par(mfrow=c(1,1))
png(filename="../../wordclouds/eaforum_ssc_comparative.png", width=12,height=8, units='in', res=300)
comparison.cloud(tdm, colors = c("indianred3","lightsteelblue3"),
title.size=3, max.words=400)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE,colors = brewer.pal(8, "Spectral"), title.size=3, max.words=400)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE,colors = brewer.pal(8, "Spectral"), title.size=0.1, max.words=400, width=12,height=8, units='in', res=300)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE,colors = brewer.pal(8, "Spectral"), title.size=0.1, max.words=400, width=12,height=8, units='in', res=300)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE,colors = brewer.pal(8, "Spectral"), title.size=1, max.words=400, width=12,height=8, units='in', res=300)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE,colors = brewer.pal(4, "Set1"), title.size=1, max.words=400, width=12,height=8, units='in', res=300)
dev.off()
brewer.pal(3, "Set1")
par(mfrow=c(1,1))
png(filename="../../wordclouds/eaforum_ssc_comparative.png", width=12,height=8, units='in', res=300)
comparison.cloud(tdm, colors = c("#E41A1C","#377EB8"),
title.size=1, max.words=400)
dev.off()
?par
install.packages("extrafont")
library(extrafont)
font_import()
font_import()
fonts()
png(filename="../../wordclouds/eaforum_ssc_comparative.png", width=12,height=8, units='in', res=300)
comparison.cloud(tdm, colors = c("#E41A1C","#377EB8"),
title.size=1, max.words=400, family="Gill Sans MT")
dev.off()
png(filename="../../wordclouds/eaforum_ssc_comparative.png", width=12,height=8, units='in', res=300)
comparison.cloud(tdm, colors = c("#E41A1C","#377EB8"),
title.size=1, max.words=400, family="Gill Sans MT", font=1)
dev.off()
fonttable()$FamilyName
loadfonts(device = "win")
par(mfrow=c(1,1))
png(filename="../../wordclouds/eaforum_ssc_comparative.png", width=12,height=8, units='in', res=300)
comparison.cloud(tdm, colors = c("#E41A1C","#377EB8"),
title.size=1, max.words=400, family="Gill Sans MT", font=1)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE, title.size=3, max.words=400, width=12,height=8, units='in', res=300)
dev.off()
library(wordcloud)
library(extrafont)
loadfonts(device = "win")
tdm <- read.csv('../../data/eaforum_scc_BOW.csv', row.names=1)
par(mfrow=c(1,1))
png(filename="../../wordclouds/eaforum_ssc_comparative.png", width=12,height=8, units='in', res=300)
comparison.cloud(tdm, colors = c("#E41A1C","#377EB8"),
title.size=1, max.words=400, family="Gill Sans MT", font=1)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE, title.size=3, max.words=400, width=12,height=8, units='in', res=300)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE, scale=c(5, .5),colors = brewer.pal(4, "Dark2"), max.words=400)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE, scale=c(5, .5),colors = brewer.pal(4, "Dark2"), max.words=400, width=12,height=8, units='in', res=300)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE, scale=c(5, .5),colors = brewer.pal(4, "Dark2"), max.words=400, res=300)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE, scale=c(5, .5),width =12, colors = brewer.pal(4, "Dark2"), max.words=400, res=300)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE, scale=c(5, .5), width =12, colors = brewer.pal(4, "Dark2"), max.words=400, res=800)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE, scale=c(5, .5), width =12, units='in', colors = brewer.pal(4, "Dark2"), max.words=400, res=800)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE, scale=c(5, .5),  colors = brewer.pal(4, "Dark2"), max.words=400, res=800)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE, scale=c(5, .5),  colors = brewer.pal(4, "Dark2"), max.words=400, height=8, units='in', res=800)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE, scale=c(5, .5),  colors = brewer.pal(4, "Dark2"), max.words=400, height=8, units='in', res=800)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE, colors = brewer.pal(4, "Dark2"), max.words=400, scale=c(10,0.25), height=8, units='in', res=800)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE, scale=c(5, .5),  colors = brewer.pal(4, "Dark2"), max.words=400,  units='in', res=800)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE, scale=c(5, .5),  colors = brewer.pal(4, "Dark2"), max.words=400, res=800)
dev.off()
commonality.cloud(tdm, random.order=FALSE, scale=c(5, .5),  colors = brewer.pal(4, "Dark2"), max.words=400, res=800)
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE, scale=c(5, .5),  colors = brewer.pal(4, "Dark2"), max.words=4000, width=12, units='in', res=800)
dev.off()
commonality.cloud(tdm, random.order=FALSE, scale=c(5, .5),  colors = brewer.pal(4, "Dark2"), max.words=400)
commonality.cloud(tdm, random.order=FALSE,  colors = brewer.pal(4, "Dark2"), max.words=400)
commonality.cloud(tdm, scale=c(3.5,0.25), random.order=FALSE,  colors = brewer.pal(4, "Dark2"), max.words=400)
commonality.cloud(tdm, scale=c(35,0.25), random.order=FALSE,  colors = brewer.pal(4, "Dark2"), max.words=400)
commonality.cloud(tdm, scale=c(3.5,0.1), random.order=FALSE,  colors = brewer.pal(4, "Dark2"), max.words=400)
commonality.cloud(tdm, scale=c(3.5,0.02), random.order=FALSE,  colors = brewer.pal(4, "Dark2"), max.words=400)
commonality.cloud(tdm, scale=c(2,0.02), random.order=FALSE,  colors = brewer.pal(4, "Dark2"), max.words=400)
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, scale=c(2,0.02), random.order=FALSE,  colors = brewer.pal(4, "Dark2"),width=12,height=8, units='in', res=300, max.words=400)
dev.off()
commonality.cloud(tdm, scale=c(2,0.02), random.order=FALSE,  colors = brewer.pal(4, "Dark2"),width=12,height=8, units='in', res=300, max.words=400)
commonality.cloud(tdm, scale=c(2,0.02), random.order=FALSE,  colors = brewer.pal(4, "Dark2"),width=12,height=8, units='in', res=300, max.words=400)
commonality.cloud(tdm, scale=c(2,0.02), random.order=FALSE,  colors = brewer.pal(4, "Dark2"), max.words=400)
png(filename="../../wordclouds/eaforum_ssc_commonality.png", res=800)
commonality.cloud(tdm, scale=c(2,0.02), random.order=FALSE,  colors = brewer.pal(4, "Dark2"), max.words=400)
dev.off()
commonality.cloud(tdm, random.order=FALSE,  colors = brewer.pal(4, "Dark2"), max.words=400)
png(filename="../../wordclouds/eaforum_ssc_commonality.png", res=800)
commonality.cloud(tdm, random.order=FALSE,  colors = brewer.pal(4, "Dark2"), max.words=400)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE,  colors = brewer.pal(4, "Dark2"), max.words=400)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png")
commonality.cloud(tdm, random.order=FALSE,  colors = brewer.pal(4, "Dark2"), height=8, width=8, units='in', max.words=400)
dev.off()
png(filename="../../wordclouds/eaforum_ssc_commonality.png", res=400)
commonality.cloud(tdm, random.order=FALSE,  colors = brewer.pal(4, "Dark2"), max.words=400)
dev.off()
pdf(filename="../../wordclouds/eaforum_ssc_commonality.pdf")
commonality.cloud(tdm, random.order=FALSE,  colors = brewer.pal(4, "Dark2"), max.words=400)
dev.off()
?pdf
pdf(file="../../wordclouds/eaforum_ssc_commonality.pdf")
commonality.cloud(tdm, random.order=FALSE,  colors = brewer.pal(4, "Dark2"), max.words=400)
dev.off()
pdf(file="../../wordclouds/eaforum_ssc_commonality.pdf")
commonality.cloud(tdm, random.order=FALSE,  colors = brewer.pal(4, "Set1"), max.words=400, family="Gill Sans MT", font=1)
dev.off()
pdf(file="../../wordclouds/eaforum_ssc_commonality.pdf")
commonality.cloud(tdm, random.order=FALSE,  colors = brewer.pal(6, "Set1"), max.words=400, family="Gill Sans MT", font=1)
dev.off()
pdf(file="../../wordclouds/eaforum_ssc_commonality.pdf")
commonality.cloud(tdm, random.order=FALSE,  colors = brewer.pal(4, "Set1"), max.words=400, family="Gill Sans MT", font=1)
dev.off()
library(wordcloud)
library(extrafont)
loadfonts(device = "win")
tdm <- read.csv('../../data/eaforum_scc_BOW.csv', row.names=1)
tdm <- read.csv('../../data/eaforum_scc_BOW.csv', row.names=1)
par(mfrow=c(1,1))
png(filename="../../out/wordclouds/eaforum_ssc_comparative.png", width=12,height=8, units='in', res=300)
comparison.cloud(tdm, colors = c("#E41A1C","#377EB8"),
title.size=1, max.words=400, family="Gill Sans MT", font=1)
dev.off()
pdf(file="../../out/wordclouds/eaforum_ssc_commonality.pdf")
commonality.cloud(tdm, random.order=FALSE,  colors = brewer.pal(4, "Set1"), max.words=400, family="Gill Sans MT", font=1)
dev.off()
